TOP = ..

include $(TOP)/configure/CONFIG

USR_CFLAGS += -std=gnu99
USR_CFLAGS += -Werror -Wall -Wextra -Wno-unused-parameter
USR_CFLAGS += -Wundef
USR_CFLAGS += -Wshadow
USR_CFLAGS += -Wcast-align
USR_CFLAGS += -Wcast-qual
USR_CFLAGS += -Wwrite-strings
USR_CFLAGS += -Wredundant-decls
USR_CFLAGS += -Wmissing-prototypes
USR_CFLAGS += -Wmissing-declarations
USR_CFLAGS += -Wstrict-prototypes
USR_CFLAGS += -Wconversion

# Annoyingly we need this when playing tricks with default initialisers
USR_CFLAGS += -Wno-missing-field-initializers

USR_CFLAGS += -Wno-system-headers
# This tells the compiler to ignore errors generated by EPICS includes.  We need
# this because the EPICS headers have non strict prototypes in places.
USR_CPPFLAGS += -isystem $(EPICS_BASE)/include

# The following flags allow ASSERT_...() to generate a useful traceback.
USR_CFLAGS += -g
USR_LDFLAGS += -g
USR_LDFLAGS += -rdynamic




#=============================

USR_CPPFLAGS += -I$(EPICS_DEVICE)/include

PROD_IOC = example_ioc

DBD += example_ioc.dbd
example_ioc_DBD += base.dbd
example_ioc_DBD += epics_device.dbd

example_ioc_SRCS += example_ioc_registerRecordDeviceDriver.c
example_ioc_SRCS += main.c
example_ioc_SRCS += example_pvs.c

example_ioc_LIBS += epics_device
example_ioc_LIBS += $(EPICS_BASE_IOC_LIBS)


include $(TOP)/configure/RULES
